# Phase 04: Testing Setup & Quality Assurance

This phase establishes testing infrastructure for both frontend and backend, ensures you can run existing tests, and prepares you to write tests for your contributions. Good testing practices are essential for maintaining quality while fixing rough edges.

## Tasks

- [x] Navigate to ui directory and run `npm test` to execute frontend tests and verify test infrastructure works
  - **Completed**: Frontend test infrastructure verified working with Jest
  - **Results**: 3 test suites passed (17 tests total) in 1.223s
  - **Test files**: formatSshUrl.spec.ts, getVcsNameFromUrl.spec.ts, getVcsTypeFromUrl.spec.ts
  - **Command used**: `cd ui && npm test -- --watchAll=false`
- [x] Review the frontend testing setup in package.json to understand the testing framework (Jest, React Testing Library, etc.)
  - **Testing Framework**: Jest (v30.2.0) with ts-jest for TypeScript support
  - **Testing Library**: @testing-library/react (v16.3.1) and @testing-library/jest-dom (v6.9.1)
  - **Test Environment**: jsdom for DOM simulation
  - **Test Command**: `npm test` (runs Jest)
  - **Configuration Files**:
    - `jest.config.js`: Main Jest configuration with jsdom environment, ts-jest transform, CSS/SVG module mapping, path aliases (@/)
    - `jest.setup.ts`: Imports @testing-library/jest-dom for custom matchers
    - `tsconfig.test.json`: TypeScript configuration for tests with ES2020 target and strict mode
  - **Key Features**:
    - TypeScript support via ts-jest transformer
    - CSS/SCSS module mocking with identity-obj-proxy
    - SVG mocking with jest-transformer-svg
    - Path alias support (@/* â†’ src/*)
    - Custom Jest matchers from jest-dom (e.g., toHaveTextContent, toBeInTheDocument)
- [x] Examine 2-3 existing frontend component tests to understand testing patterns and conventions
  - **Files Analyzed**:
    - `ui/src/modules/workspaces/utils/formatSshUrl.spec.ts` (7 tests)
    - `ui/src/modules/workspaces/utils/getVcsNameFromUrl.spec.ts` (4 tests)
    - `ui/src/modules/workspaces/utils/getVcsTypeFromUrl.spec.ts` (6 tests)
  - **Testing Patterns Identified**:
    - **File Naming**: `.spec.ts` extension for test files, co-located with source files
    - **Structure**: `describe()` blocks group related tests, `test()` for individual test cases
    - **Assertions**: Standard Jest `expect()` with matchers like `toBe()`
    - **Test Organization**: Organized by feature/scenario, descriptive test names
    - **Pure Function Testing**: Tests focus on utility functions with clear inputs/outputs
    - **Import Style**: Direct imports from adjacent files using relative paths
    - **Type Safety**: Tests use TypeScript with proper types (e.g., `VcsType` enum)
    - **Async Handling**: Some tests marked `async` even when not awaiting (likely for consistency)
  - **Testing Conventions**:
    - Tests validate VCS URL parsing/formatting for multiple providers (GitHub, GitLab, Bitbucket, Azure DevOps)
    - Each test case covers a specific VCS provider or URL format variant
    - Descriptive test names follow pattern: "[Provider/Feature] [action] [expected result]"
    - Tests are comprehensive, covering edge cases like SSH vs HTTPS URLs, different domain patterns
    - No mocking needed for these utility functions (pure functions with deterministic outputs)
- [ ] Verify test coverage can be generated by running `npm test -- --coverage` and reviewing the output
- [ ] Navigate to api directory and run backend tests using Maven with `./mvnw test` or `mvn test`
- [ ] Review the backend testing setup and identify testing frameworks used (JUnit, Mockito, etc.)
- [ ] Examine 2-3 existing backend unit tests to understand mocking patterns and test structure
- [ ] Look for integration tests that test API endpoints with a test database
- [ ] Check for any end-to-end tests in a separate e2e directory or test suite
- [ ] Verify linting works by running `npm run lint` in the ui directory (if configured)
- [ ] Check for code formatting configuration (Prettier, ESLint) and run formatting checks
- [ ] Identify continuous integration configuration (.github/workflows, .gitlab-ci.yml) to understand CI/CD testing
- [ ] Document the testing strategy in testing-guide.md in Auto Run Docs including how to run tests and write new ones
- [ ] Create a checklist of quality gates to run before submitting contributions (tests, linting, formatting)
- [ ] Identify any gaps in test coverage that should be addressed when fixing bugs or adding features